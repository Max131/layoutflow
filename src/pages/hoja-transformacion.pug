extends ../templates/default
block vars
 - title = "Hoja de trazabilidad - Sector Transformación"
 - classes = ""
block content
  .container(x-data="modals")
    h2.has-text-grey.has-font-secondary.mb-0 Hoja de trazabilidad. Sector Transformación
    // TODO: Mensaje 
    .message.is-error.is-large.my-1
      p No puedes editar este formulario...
    .sheet-steps(x-data="steps")
      form.form-sector(x-data="form({actionURL: 'http://mercados/wp-json/wp/v2/sector-productor'})", x-bind="form", autocomplete="off")
        input(type="hidden", name="id", value="0")
        input(type="hidden", name="user_id", value="0")
        input(type="hidden", name="draft", value="0", x-ref="draft")
        .form-sector-content
          .message(x-cloak, x-show="message", :class="{[messageType]: messageType}",x-transition)
            p(x-text="message")

          include ../templates/parts/sectors/transformacion/gestion
          include ../templates/parts/sectors/transformacion/trazabilidad
          include ../templates/parts/sectors/transformacion/ingresos
          include ../templates/parts/sectors/transformacion/agricultura
          include ../templates/parts/sectors/transformacion/social
          include ../templates/parts/sectors/transformacion/medioambiente

        include ../templates/parts/form-steps     

        .modals
          // Modal guardar borrador
          +modal({title:"Guardar borrador", name:"modal-draft"})
            p Al guardar el formulario como borrador, podrás editarlo posteriormente, para que, al complentarlo, lo puedas enviar a revisión. 
            .buttons.are-vertical
              button.button.is-fullwidth(type="button", value="1", @click="setDraft") Guardar borrador
              button.button.is-outlined.is-fullwidth(type="button", x-bind="modalClose") Cancelar

            hr.or-bar

            p #[button.modal-continue-button(type="button", aria-label="Continuar respondiendo", x-bind="modalClose") Continua] responiendo el cuestionario

          // Modal enviar a revisión
          +modal({title:"¿Enviar a revisión?", name:"modal-send", titleClass:"has-text-accent"})
            p Al enviar el formulario a revisión, serán examinadas y validadas tus respuesta para proceder a aceptar (o rechazar) el alta de tu producto.
            p Asegurate de revisar y verificar cada una de tus respuestas.
            .buttons.are-vertical
              button.button.is-fullwidth(type="button", value="0", @click="setDraft") Enviar
              button.button.is-outlined.is-fullwidth(type="button", x-bind="modalClose") Cancelar

            hr.or-bar(data-or-text="¿No lo has acabado aún?")

            p #[button.modal-continue-button(type="button", aria-label="Continuar respondiendo", x-bind="modalClose") Continua] responiendo el cuestionario

          // Modal solicitud enviada
          +modal({title:"Solicitud enviada", name:"modal-sended", titleClass:"has-text-accent"})
            p Tu solicitud ha sido enviada, agradecemos el tiempo que te has tomado en llenarla. Nuestro equipo se encargará de revisarla detenidamente para hacerte llegar nuestra respuesta lo antes posible.

            .buttons.are-vertical
              a.button.is-fullwidth(href="/") Volver al inicio

          // Modal borrador guardado
          +modal({title:"Solicitud enviada", name:"modal-draft-saved", titleClass:"has-text-accent"})
            p La hoja de trazabilidad se ha guardado como #[strong borrador], para que tengas la posibilidad de editarla posteriormente antes de enviarla.

            .buttons.are-vertical
              a.button.is-fullwidth(href="/") Volver al inicio

